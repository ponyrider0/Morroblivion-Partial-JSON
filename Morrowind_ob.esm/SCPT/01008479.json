{
    "Record Header": {
        "Signature": "SCPT", 
        "Record Flags": {}, 
        "FormID": "01008479"
    }, 
    "EDID - Editor ID": "fbmwBMHircineRingTransformationScript", 
    "SCHR - Basic Script Data": {
        "Unused": "00 00 00 00", 
        "RefCount": 19, 
        "CompiledSize": 1909, 
        "VariableCount": 20, 
        "Type": 1
    }, 
    "SCDA - Compiled Script": "1D 00 00 00 10 00 06 00 00 00 77 06 00 00 15 00 09 00 66 10 00 04 00 20 30 2E 31 16 00 0A 00 1C 00 06 00 20 58 E7 14 00 00 15 00 1A 00 66 11 00 15 00 20 58 55 19 0F 00 01 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 15 00 1E 00 73 12 00 19 00 20 58 55 19 13 00 01 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 16 00 0D 00 09 00 09 00 20 66 11 00 20 30 20 21 3D 16 00 0F 00 07 00 0B 00 20 66 11 00 20 66 04 00 20 21 3D 06 14 16 00 01 00 12 00 52 6F 6C 6C 62 61 63 6B 20 53 61 76 65 20 47 61 6D 65 16 00 0F 00 02 00 0B 00 20 66 11 00 20 5A 06 00 20 3D 3D 69 14 24 00 02 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 47 07 00 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 00 04 00 42 01 19 00 00 00 83 18 17 00 01 05 00 52 09 00 02 08 00 56 04 00 00 11 00 08 00 56 02 00 00 12 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 11 00 19 00 00 00 19 00 00 00 16 00 19 00 0D 00 15 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 30 20 21 3D 20 26 26 54 19 1B 00 02 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 08 00 56 02 00 00 06 00 54 19 17 00 02 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0B 00 01 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 04 00 16 00 0F 00 04 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 15 00 14 00 73 08 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0C 00 20 2A 8D 14 08 00 02 00 73 08 00 72 0D 00 69 14 2A 00 02 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 7A 00 00 00 00 80 87 C3 40 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 01 04 00 42 01 17 00 02 00 02 00 15 00 14 00 73 0B 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0E 00 20 2A 8D 14 08 00 02 00 73 0B 00 72 0F 00 19 00 00 00 19 00 00 00 19 00 00 00 16 00 19 00 15 00 15 00 20 73 01 00 20 31 20 3D 3D 20 73 05 00 20 30 20 3D 3D 20 26 26 16 00 0D 00 01 00 09 00 20 73 06 00 20 30 20 21 3D FE 16 09 00 01 08 00 56 02 00 00 06 00 19 00 00 00 65 17 13 00 01 12 00 56 02 00 00 06 00 58 01 00 1D 17 04 00 00 00 00 54 19 1B 00 02 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 08 00 56 02 00 00 06 00 54 19 17 00 02 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0B 00 01 08 00 56 04 00 00 04 00 1C 00 01 00 69 16 05 00 01 00 72 10 00 83 18 0F 00 01 05 00 52 11 00 01 08 00 56 04 00 00 04 00 15 00 07 00 73 05 00 02 00 20 31 16 00 0F 00 05 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 15 00 2C 00 47 07 00 27 00 20 58 00 11 21 00 01 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 69 14 2A 00 02 00 1D 00 66 41 63 74 6F 72 53 74 72 65 6E 67 74 68 45 6E 63 75 6D 62 72 61 6E 63 65 4D 75 6C 74 7A 00 00 00 00 80 87 C3 40 15 00 14 00 73 08 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0C 00 20 2A 8D 14 08 00 02 00 73 08 00 72 0D 00 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 01 04 00 42 01 17 00 02 00 02 00 15 00 14 00 73 0B 00 0F 00 20 34 20 58 4A 10 05 00 01 00 72 0E 00 20 2A 8D 14 08 00 02 00 73 0B 00 72 0F 00 19 00 00 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 04 00 18 00 0D 00 0D 00 09 00 20 73 01 00 20 31 20 3D 3D 72 17 10 00 01 0F 00 53 0A 00 74 69 6D 65 72 2E 2E 2E 2E 2E 16 00 0D 00 04 00 09 00 20 66 02 00 20 31 38 20 3C 16 00 13 00 02 00 0F 00 20 66 03 00 20 66 02 00 20 36 20 2B 20 3E 3D 15 00 07 00 73 01 00 02 00 20 32 72 17 16 00 01 15 00 53 10 00 70 72 65 70 61 72 65 20 72 6F 6C 6C 62 61 63 6B 19 00 00 00 18 00 0E 00 04 00 0A 00 20 66 03 00 20 66 02 00 20 3C 16 00 18 00 02 00 14 00 20 66 03 00 20 66 02 00 20 36 20 2B 20 32 34 20 2D 20 3E 3D 15 00 07 00 73 01 00 02 00 20 32 72 17 16 00 01 15 00 53 10 00 70 72 65 70 61 72 65 20 72 6F 6C 6C 62 61 63 6B 19 00 00 00 19 00 00 00 15 00 09 00 66 03 00 04 00 20 47 12 00 18 00 0D 00 0E 00 09 00 20 73 01 00 20 32 20 3D 3D 83 18 17 00 01 05 00 52 09 00 02 08 00 56 04 00 00 04 00 08 00 56 02 00 00 06 00 83 18 0F 00 01 05 00 52 13 00 01 08 00 56 04 00 00 04 00 83 18 0F 00 01 05 00 52 0A 00 01 08 00 56 04 00 00 04 00 16 00 0F 00 01 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 83 18 0F 00 01 05 00 52 08 00 02 04 00 42 00 04 00 42 01 19 00 00 00 15 00 07 00 73 05 00 02 00 20 30 15 00 07 00 66 02 00 02 00 20 30 15 00 07 00 66 03 00 02 00 20 30 15 00 07 00 73 01 00 02 00 20 30 15 00 07 00 66 04 00 02 00 20 30 54 19 13 00 02 0E 00 53 09 00 4C 61 73 74 41 63 74 6F 72 04 00 42 00 54 19 17 00 02 12 00 53 0D 00 4C 61 73 74 4D 6F 64 65 6C 50 61 74 68 04 00 42 00 FE 16 09 00 01 08 00 56 02 00 00 06 00 19 00 00 00 16 00 0F 00 0A 00 0B 00 20 66 04 00 20 5A 06 00 20 3D 3D 16 00 0D 00 08 00 09 00 20 73 05 00 20 31 20 3D 3D 65 17 13 00 01 12 00 56 04 00 00 0E 00 58 00 00 27 16 04 00 00 00 00 16 00 08 00 05 00 04 00 20 66 0E 00 16 00 25 00 01 00 21 00 20 72 04 00 58 5E 14 02 00 00 00 20 31 20 3D 3D 20 72 04 00 58 05 10 00 00 20 30 20 3D 3D 20 26 26 A8 15 07 00 01 00 6E 05 00 00 00 17 00 02 00 01 00 A7 15 07 00 01 00 6E 05 00 00 00 19 00 00 00 19 00 00 00 19 00 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E EA 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E EB 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E FE 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00 10 00 0D 00 01 00 2B 00 00 00 01 00 6E FF 03 00 00 16 00 1B 00 01 00 17 00 20 73 05 00 20 31 20 3D 3D 20 66 04 00 20 5A 06 00 20 3D 3D 20 26 26 E4 16 00 00 19 00 00 00 11 00 00 00", 
    "SCTX - Script Source": "scn fbmwBMHircineRingTransformationScript\n\nfloat fQuestDelayTime\nshort Transform\nfloat time\nfloat newtime\nref Actor\nshort iswerewolf\nstring_var modelpath\nshort GetPathOnce\nshort attackclaws\nArray_var equippeditem\nshort i\nshort attackclawsNPC\nref item\nref potentialattacker\nref crosshairRef\nref lastActor\nstring_var lastModelPath\nshort numb\n;;LOcal Data LastActor, LastModelPath\n\nBegin GameMode\n\tset fQuestDelayTime to 0.1\n\t;Hircine ring transformation differs slightly form original one\n\t;We really need to have some ModLocalData to manage reloading\n\t;No wait control disabilitation, no bloodlust\n\t;TODO still need to readd ponyrider0 additions\n\t;;Note this script expect that only one instance of hircine's ring exist on the gameworld\n\t;;Otherwise I would need a way to store as LocalData an array and this is not possible AFAIK\n\t;;TODO Try to allow an array local data\n\t;\tset numb to player.GetObjectReferenceCount fbmwBMringhircine\n\t;\tprintc \"Number  %.0f\" numb\n\t;\tif( numb > 1)\n\t;\t\tprintc \"too much Hircine's Ring Spawned %.0f . disable quest script\" numb\n\t;\tendif\n\tif (GetGameLoaded)\n\t\tset lastActor to GetModLocalData \"LastActor\"\t\t\n\t\tset lastModelPath to GetModLocalData \"LastModelPath\"\n\t\t;printc \"LAstAsctor %.0f\" lastActor\n\t\tif(lastActor != 0)\n\t\t\tif(lastActor != Actor)\n\t\t\t\tprintc \"Rollback Save Game\"\n\t\t\t\tif(lastActor == Player)\n\t\t\t\t\tSetNumericGameSetting fActorStrengthEncumbranceMult oldencoumbrancesetting\n\t\t\t\t\tCall fbmwBMWerewolfManageControlPC 0 1\n\t\t\t\tendif\n\t\t\t\tCall fbmwBMWerewolfRollBack lastActor lastModelPath\n\t\t\t\tCall fbmwUpdate3D lastActor\n\t\t\tendif\n\t\tendif\n\t\tif(iswerewolf == 1  && Actor != 0)\n\t\t\tSetModLocalData \"LastModelPath\"  modelpath\n\t\t\tSetModLocalData \"LastActor\" Actor\n\t\t\tCall fbmwBMWerewolfTransform Actor\n\t\t\tCall fbmwUpdate3D Actor\n\t\t\tif(Actor == Player)\n\t\t\t\tset attackclaws to (4)*(GetGlobalValue fbmwbmclawcost)\n\t\t\t\tSetAttackDamage attackclaws fbmwbmwerewolfclawPC\n\t\t\t\tSetNumericGameSetting fActorStrengthEncumbranceMult 9999\n\t\t\t\tCall fbmwBMWerewolfManageControlPC 1 1\n\t\t\telse\n\t\t\t\tset attackclawsNPC  to (4)*(GetGlobalValue fbmwbmClawcostnpc)\n\t\t\t\tSetAttackDamage attackclawsNPC fbmwbmwerewolfclaw\n\t\t\tendif\n\t\tendif\n\tendif\n\tif(Transform == 1 && iswerewolf == 0)\n\t\t;Print \"running hircine's ring\"\n\t\tif(modelpath != 0)\n\t\t\tsv_Destruct modelpath\n\t\tendif\n\t\tLet modelpath := Actor.GetModelPath\n\t\tSetModLocalData \"LastModelPath\"  modelpath\n\t\tSetModLocalData \"LastActor\" Actor\n\t\t;Print \"Skeleton path aquired \" + modelpath\n\t\tCall fbmwBMWerewolfTransform Actor\n\t\tActor.UnequipItemNS fbmwBMringhircine \n\t\tCall fbmwBMWerewolfEquip Actor\n\t\tset iswerewolf to 1\n\t\tif(Actor == Player)\n\t\t\t;\tPrint \"running the player section of the script\"\n\t\t\tset oldencoumbrancesetting to GetGameSetting fActorStrengthEncumbranceMult \n\t\t\tSetNumericGameSetting fActorStrengthEncumbranceMult 9999\n\t\t\tset attackclaws  to (4)*(GetGlobalValue fbmwbmclawcost)\n\t\t\tSetAttackDamage attackclaws fbmwbmwerewolfclawPC\n\t\t\tCall fbmwBMWerewolfManageControlPC 1 1\n\t\telse\n\t\t\t;\tPrint \"running non player part of the script\"\n\t\t\t;Actor.SetAV aggression 100\n\t\t\tset attackclawsNPC  to (4)*(GetGlobalValue fbmwbmClawcostnpc)\n\t\t\tSetAttackDamage attackclawsNPC fbmwbmwerewolfclaw\n\t\t\t;Actor.StartCombat Player\n\t\t\t;Should be the actor script to do so\n\t\tEndif\n\t\tCall fbmwUpdate3D Actor\n\telseif(Transform == 1)\n\t\t;;Wrong FIX.\n\t\tPrint \"timer.....\"\n\t\tif (time < 18)\n\t\t\tif(newtime >= (time + 6))\n\t\t\t\tset Transform to 2\n\t\t\t\tPrint \"prepare rollback\"\n\t\t\tendif\n\t\telseif (newtime < time)\n\t\t\tif(newtime >= (time + 6 - 24))\n\t\t\t\tset Transform to 2\n\t\t\t\tPrint \"prepare rollback\"\n\t\t\tendif\n\t\tendif\n\t\tset newtime to GameHour\n\telseif(Transform == 2)\n\t\t;Print \"rollback\"\n\t\tCall fbmwBMWerewolfRollBack Actor modelpath\n\t\tCall fbmwBMWerewolfUnequip Actor\n\t\tCall fbmwUpdate3D Actor\n\t\tif(Actor == Player)\n\t\t\tCall fbmwBMWerewolfManageControlPC 0 1\n\t\tendif\n\t\tset iswerewolf to 0\n\t\tset time to 0\n\t\tset newtime to 0\n\t\tset Transform to 0\n\t\tset Actor to 0\n\t\tSetModLocalData \"LastActor\" 0\n\t\tSetModLocalData \"LastModelPath\" 0\n\t\tsv_Destruct modelpath\n\t\t;\tStopQuest fbmwBMHircinesRingControlQuest ;TODO control.\n\tendif\n\tif(Actor == Player)\n\t\tif(iswerewolf == 1)\n\t\t\tLet crosshairRef := GetCrosshairRef\n\t\t\tif(crosshairRef)\n\t\t\t\tif(crosshairRef.IsDoor == 1)&&(crosshairRef.GetLocked == 0);To avoid being blocked in an interior.\n\t\t\t\t\tEnableControl 5\n\t\t\t\telse\n\t\t\t\t\tDisableControl 5\n\t\t\t\tendif\n\t\t\tendif\n\t\tendif\n\tendif\nEnd\nBegin MenuMode 1002\n\tif(iswerewolf == 1 && Actor == Player)\t\n\t\tCloseAllMenus\n\tendif\nEnd\nBegin MenuMode 1003\n\tif(iswerewolf == 1 && Actor == Player)\t\n\t\tCloseAllMenus\n\tendif\nEnd\nBegin MenuMode 1022\n\tif(iswerewolf == 1 && Actor == Player)\t\n\t\tCloseAllMenus\n\tendif\nEnd\nBegin MenuMode 1023\n\tif(iswerewolf == 1 && Actor== Player)\t\n\t\tCloseAllMenus\n\tendif\nEnd\n;<CSEBlock>\n;<CSECaretPos> 42 </CSECaretPos>\n;</CSEBlock>", 
    "Local Variables": [
        {
            "SLSD - Local Variable Data": {
                "Index": 1, 
                "Unused": "CD CD CD CD CD CD CD", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "Transform"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 2, 
                "Unused": "CD CD CD CD CD CD CD", 
                "Flags": {}
            }, 
            "SCVR - Name": "time"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 3, 
                "Unused": "CD CD CD CD CD CD CD", 
                "Flags": {}
            }, 
            "SCVR - Name": "newtime"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 4, 
                "Unused": "CD CD CD CD CD CD CD", 
                "Flags": {}
            }, 
            "SCVR - Name": "Actor"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 5, 
                "Unused": "CD CD CD CD CD CD CD", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "iswerewolf"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 6, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "modelpath"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 7, 
                "Unused": "61 67 65 43 6F 6E 74", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "GetPathOnce"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 8, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "attackclaws"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 9, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {}
            }, 
            "SCVR - Name": "equippeditem"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 10, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "i"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 11, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "attackclawsNPC"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 12, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {}
            }, 
            "SCVR - Name": "item"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 13, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {}
            }, 
            "SCVR - Name": "potentialattacker"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 14, 
                "Unused": "61 67 65 43 6F 6E 74", 
                "Flags": {}
            }, 
            "SCVR - Name": "crosshairRef"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 16, 
                "Unused": "CD CD CD CD CD CD CD", 
                "Flags": {}
            }, 
            "SCVR - Name": "fQuestDelayTime"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 17, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {}
            }, 
            "SCVR - Name": "lastActor"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 18, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "lastModelPath"
        }, 
        {
            "SLSD - Local Variable Data": {
                "Index": 20, 
                "Unused": "00 00 00 00 00 00 00", 
                "Flags": {
                    "IsLongOrShort": true
                }
            }, 
            "SCVR - Name": "numb"
        }
    ], 
    "References": [
        4, 
        12, 
        13, 
        14, 
        17, 
        20, 
        "oldencoumbrancesetting", 
        "fbmwBMWerewolfManageControlPC", 
        "fbmwBMWerewolfRollBack", 
        "fbmwUpdate3D", 
        "fbmwBMWerewolfTransform", 
        "fbmwbmclawcost", 
        "fbmwbmwerewolfclawPC", 
        "fbmwbmClawcostnpc", 
        "fbmwbmwerewolfclaw", 
        "fbmwBMringhircine", 
        "fbmwBMWerewolfEquip", 
        "GameHour", 
        "fbmwBMWerewolfUnequip"
    ]
}